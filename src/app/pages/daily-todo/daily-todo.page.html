<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start" type="overlay">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>ToDo Diário</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">

  <ion-list>
    <p>Tasks para todos os dias</p>
  </ion-list>
  <ion-list *ngFor="let task of tasks" class="animate__animated animate__bounceInRight">
    <ion-item-sliding >
      <ion-item (click)="onClick(task)">
        <ion-label *ngIf="!task.open"><strong>{{task.name}}</strong> <br> <p>{{task.taskStart}} até {{task.taskFinal}}</p></ion-label>
        <ion-label *ngIf="task.open"><strong>{{task.name}}</strong> <br> <p>{{task.taskStart}} até {{task.taskFinal}}</p></ion-label>
        <ion-label *ngIf="task.status === 'done'"><del>{{task.name}}</del></ion-label>
        <ion-icon slot="start" name="caret-forward" *ngIf="!task.open"></ion-icon>
        <ion-icon slot="start" name="caret-down" *ngIf="task.open"></ion-icon>
        <ion-icon slot="start" name="checkmark-circle" color="success" *ngIf="task.status == 'done'"></ion-icon>
      </ion-item>
      <ion-item-options side="end">
        <ion-item-option (click)="taskOption(task)" color="primary">Opções</ion-item-option>
      </ion-item-options>
    </ion-item-sliding>
    <ion-item *ngIf="task.open">
      <ion-grid>
        <ion-row>
          <ion-col>
            <div>
              <p>Execução</p>
              <ion-label *ngIf="task.status==='doing'"><countdown #countTask [config]="{leftTime: task.taskTimer}" (event)="handleEventTask($event)"></countdown></ion-label>
            </div>
          </ion-col>
          <ion-col>
            <div>
              <p>Descanso</p>
              <ion-label *ngIf="task.status==='pause'"><countdown #countRest [config]="{leftTime: task.restTimer}"  (event)="handleEventRest($event)"></countdown></ion-label>
            </div>
          </ion-col>
        </ion-row>
      </ion-grid>
      <ion-icon slot="start" name="play-circle" (click)="onTimerClick(task); countTask.resume();" *ngIf="task.status === 'pause'"></ion-icon>
      <ion-icon slot="start" name="pause-circle" (click)="onTimerClick(task); countTask.pause();" *ngIf="task.status === 'doing'"></ion-icon>
    </ion-item>
  </ion-list>


  <ion-fab vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button (click)="showAdd()" color="primary">
      <ion-icon name="add"></ion-icon>
    </ion-fab-button>
  </ion-fab>
  
</ion-content>
